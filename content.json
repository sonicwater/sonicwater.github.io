{"meta":{"title":"Sonic's Blog","subtitle":null,"description":"A castaway Engineer of front-end.","author":"Sonic","url":"https://github.com/sonicwater"},"pages":[{"title":"about","date":"2017-03-11T12:59:20.000Z","updated":"2018-01-03T05:38:58.421Z","comments":true,"path":"about/index.html","permalink":"https://github.com/sonicwater/about/index.html","excerpt":"","text":"about SonicA castaway Engineer of front-end.QQ：110017838Email: 110017838@qq.comgithub:https://github.com/sonicwater"},{"title":"categories","date":"2015-12-07T11:11:13.000Z","updated":"2018-01-03T05:55:36.105Z","comments":true,"path":"categories/index.html","permalink":"https://github.com/sonicwater/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-01-03T05:21:49.000Z","updated":"2018-01-03T05:22:41.329Z","comments":true,"path":"tags/index.html","permalink":"https://github.com/sonicwater/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"连续图片的动画效果","slug":"2018-06-18 [animate]","date":"2018-06-17T16:00:00.000Z","updated":"2018-07-21T14:32:14.684Z","comments":true,"path":"2018/06/18/2018-06-18 [animate]/","link":"","permalink":"https://github.com/sonicwater/2018/06/18/2018-06-18 [animate]/","excerpt":"","text":"最近做的项目中，某个文字元素要按照动效视频做成相应的动画效果，如图。这种动画的原理就是将每一幅图按照固定的宽度拼成一幅长图，然后用js控制这幅长图的background-position。 css12345html,body&#123;background: #00c;&#125;div.china&#123; width: 198px;height: 280px;background: url(\"../images/china.png\") no-repeat; background-position: 0 0;&#125; html12345678910111213141516&lt;div class=\"china\"&gt;&lt;/div&gt;&lt;script&gt; $(document).ready(function()&#123; var x = 0; var chinamove = setInterval(function()&#123; if(x&lt;-2570)&#123; clearInterval(chinamove); &#125;else&#123; x -= 198; &#125; $(\".china\").css(&#123; backgroundPositionX:x &#125;) &#125;,150); &#125;);&lt;/script&gt; 代码的实现本身并不难，这里的 x -= 198 中 198指的是每个单元图的宽度，x&lt;-2570中的2570要介于合并后的长图的长度-198后，再加上一个数，但不能大于总长度。通过定时器控制backgroundPositionX，（如果长图是竖向排列的，则需要控制backgroundPositionY）。 比较麻烦的就是做这张长图，要一个单位一个单位去制作，然后按固定宽度（这里是198px）去拼接，这里根本是在考验PS能力！ 这样做虽然笨些（很费时！），但最终呈现效果还不错，而且兼容性要高于canvas，PS能力尚可并且有耐性的同鞋可以发挥一下自己的想象力。 下面是另一幅帧数更多的动画 css12345html,body&#123;background: #c00;&#125;div.wenzi&#123; width: 288px;height: 224px;background: url(\"../images/wenzi.png\") no-repeat; background-position: 0 0;&#125; html12345678910111213141516&lt;div class=\"wenzi\"&gt;&lt;/div&gt;&lt;script&gt; $(document).ready(function()&#123; var x = 0; var wenzimove = setInterval(function()&#123; if(x&lt;-10943)&#123; clearInterval(wenzimove); &#125;else&#123; x -= 288; &#125; $(\".wenzi\").css(&#123; backgroundPositionX:x &#125;) &#125;,80); &#125;);&lt;/script&gt; 代码地址1: https://github.com/sonicwater/animate/tree/master/china代码地址2: https://github.com/sonicwater/animate/tree/master/wenzi","categories":[{"name":"animate","slug":"animate","permalink":"https://github.com/sonicwater/categories/animate/"}],"tags":[{"name":"animate","slug":"animate","permalink":"https://github.com/sonicwater/tags/animate/"}]},{"title":"连续图片的动画效果","slug":"2018-05-27 [animate] 连续图片的动画效果","date":"2018-05-26T16:00:00.000Z","updated":"2018-07-20T15:12:11.070Z","comments":true,"path":"2018/05/27/2018-05-27 [animate] 连续图片的动画效果/","link":"","permalink":"https://github.com/sonicwater/2018/05/27/2018-05-27 [animate] 连续图片的动画效果/","excerpt":"","text":"最近做的项目中，某个文字元素要按照动效视频做成相应的动画效果，如图。这种动画的原理就是将每一幅图按照固定的宽度拼成一幅长图，然后用js控制这幅长图的background-position。 css12345html,body&#123;background: #00c;&#125;div.china&#123; width: 198px;height: 280px;background: url(\"../images/china.png\") no-repeat; background-position: 0 0;&#125; html12345678910111213141516&lt;div class=\"china\"&gt;&lt;/div&gt;&lt;script&gt; $(document).ready(function()&#123; var x = 0; var chinamove = setInterval(function()&#123; if(x&lt;-2570)&#123; clearInterval(chinamove); &#125;else&#123; x -= 198; &#125; $(\".china\").css(&#123; backgroundPositionX:x &#125;) &#125;,150); &#125;);&lt;/script&gt; 代码的实现本身并不难，这里的 x -= 198 中 198指的是每个单元图的宽度，x&lt;-2570中的2570要介于合并后的长图的长度-198后，再加上一个数，但不能大于总长度。通过定时器控制backgroundPositionX，（如果长图是竖向排列的，则需要控制backgroundPositionY）。 比较麻烦的就是做这张长图，要一个单位一个单位去制作，然后按固定宽度（这里是198px）去拼接，这里根本是在考验PS能力！ 这样做虽然笨些（很费时！），但最终呈现效果还不错，而且兼容性要高于canvas，PS能力尚可并且有耐性的同鞋可以发挥一下自己的想象力。 下面是另一幅帧数更多的动画 css12345html,body&#123;background: #c00;&#125;div.wenzi&#123; width: 288px;height: 224px;background: url(\"../images/wenzi.png\") no-repeat; background-position: 0 0;&#125; html12345678910111213141516&lt;div class=\"wenzi\"&gt;&lt;/div&gt;&lt;script&gt; $(document).ready(function()&#123; var x = 0; var wenzimove = setInterval(function()&#123; if(x&lt;-10943)&#123; clearInterval(wenzimove); &#125;else&#123; x -= 288; &#125; $(\".wenzi\").css(&#123; backgroundPositionX:x &#125;) &#125;,80); &#125;);&lt;/script&gt; 代码地址1: https://github.com/sonicwater/animate/tree/master/china代码地址2: https://github.com/sonicwater/animate/tree/master/wenzi","categories":[{"name":"animate","slug":"animate","permalink":"https://github.com/sonicwater/categories/animate/"}],"tags":[{"name":"animate","slug":"animate","permalink":"https://github.com/sonicwater/tags/animate/"}]},{"title":"vue + vuex + element-ui 购物车","slug":"2018-05-18 [vue] vue + vuex + element-ui 购物车","date":"2018-05-17T16:00:00.000Z","updated":"2018-07-20T14:14:31.431Z","comments":true,"path":"2018/05/18/2018-05-18 [vue] vue + vuex + element-ui 购物车/","link":"","permalink":"https://github.com/sonicwater/2018/05/18/2018-05-18 [vue] vue + vuex + element-ui 购物车/","excerpt":"","text":"这个购物车功能相对简单，路由控制进入home页（商品列表页），添加商品后，cart页（购物车页）链接后会显示加入商品数量。进入cart页会列出添加的商品，可加减数量、删除单个商品、清空购物车。 项目目录 router.js 路由引入../page/目录下页面123456789101112131415import App from '../App'import Home from '../page/home'import Cart from '../page/cart'export default [&#123; path: '/', component: App, children: [&#123; path: '/', component: Home &#125;, &#123; path: '/cart', component: Cart &#125;]&#125;] layout.vue12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;template&gt; &lt;div&gt; &lt;el-container&gt; &lt;el-aside width=\"200px\"&gt; &lt;el-menu router :default-active=\"$route.path\" class=\"el-menu-vertical-demo nav\"&gt; &lt;el-menu-item index=\"/\"&gt; &lt;i class=\"el-icon-menu\"&gt;&lt;/i&gt; &lt;span slot=\"title\"&gt;home&lt;/span&gt; &lt;/el-menu-item&gt; &lt;el-menu-item index=\"/cart\"&gt; &lt;i class=\"el-icon-goods\"&gt;&lt;/i&gt; &lt;span slot=\"title\"&gt; cart &lt;el-badge class=\"mark\" v-if=\"totalNum\" :value=\"totalNum\" /&gt; &lt;/span&gt; &lt;/el-menu-item&gt; &lt;/el-menu&gt; &lt;/el-aside&gt; &lt;el-main&gt; &lt;el-tag v-if=\"page == 'home'\"&gt;商品列表&lt;/el-tag&gt; &lt;el-tag v-if=\"page == 'cart'\"&gt;购物车&lt;/el-tag&gt; &lt;Goods v-if=\"page == 'home'\"&gt;&lt;/Goods&gt; &lt;Cart v-if=\"page == 'cart'\"&gt;&lt;/Cart&gt; &lt;/el-main&gt; &lt;/el-container&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import &#123; mapState, mapGetters, mapActions &#125; from 'vuex' import Goods from './goods' import Cart from './cart' export default &#123; name: 'layout', props:['page'], components: &#123; Goods, Cart &#125;, computed:&#123; ...mapGetters([ 'goodList','totalNum' ]) &#125;, methods: &#123; ...mapActions(['addToCart']) &#125; &#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; 通过 &lt;el-menu&gt; 组件的 router 和 :default-active=”$route.path” 属性加上路由功能 通过 &lt;el-menu-item&gt; 组件的 index 映射 url 地址 &lt;el-main&gt; 组件部分通过 layout 父组件的 page 参数值进行 v-if 条件渲染 goods.vue123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;el-table :data=\"goodList\" style=\"width: 100%\"&gt; &lt;el-table-column prop=\"id\" label=\"商品ID\" width=\"180\"&gt;&lt;/el-table-column&gt; &lt;el-table-column prop=\"name\" label=\"商品名称\" width=\"180\"&gt;&lt;/el-table-column&gt; &lt;el-table-column prop=\"price\" label=\"单价\" width=\"180\"&gt;&lt;/el-table-column&gt; &lt;el-table-column label=\"操作\"&gt; &lt;template slot-scope=\"scope\"&gt; &lt;el-button size=\"mini\" type=\"primary\" icon=\"el-icon-plus\" @click=\"addToCart( scope.row )\"&gt;加入购物车&lt;/el-button&gt; &lt;/template&gt; &lt;/el-table-column&gt; &lt;/el-table&gt;&lt;/template&gt;&lt;script&gt; import &#123; mapState, mapGetters, mapActions &#125; from 'vuex' export default &#123; name: 'goods' computed:&#123; ...mapGetters([ 'goodList','totalNum' ]) &#125;, methods: &#123; ...mapActions(['addToCart']) &#125; &#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; 商品列表页面，加入购物车按钮的事件 addToCart 绑定的是 action.js 中 注册的 ADD_TO_CART 事件，这里传的参数 (scope.row) 是对应这一行的数据，包括这一条商品id，商品名称，单价 这里的 &lt;el-badge class=&quot;mark&quot; v-if=&quot;totalNum&quot; :value=&quot;totalNum&quot; /&gt; 绑定的是点击加入购物车按钮后的购物车商品数量总数 cart.vue123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&lt;template&gt; &lt;div&gt; &lt;el-table :data=\"cartProducts\" style=\"width: 100%\"&gt; &lt;el-table-column prop=\"id\" label=\"商品ID\" width=\"180\"&gt;&lt;/el-table-column&gt; &lt;el-table-column prop=\"name\" label=\"商品名称\" width=\"180\"&gt;&lt;/el-table-column&gt; &lt;el-table-column label=\"数量\" width=\"180\"&gt; &lt;template slot-scope=\"scope\"&gt; &lt;el-input-number size=\"mini\" :min=\"1\" :value=\"scope.row.num\" v-on:input=\"handleBlur\" @change=\"handleChange( scope.row )\"&gt;&lt;/el-input-number&gt; &lt;/template&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=\"price\" label=\"单价\" width=\"180\"&gt;&lt;/el-table-column&gt; &lt;el-table-column prop=\"total_num\" label=\"总价\" width=\"180\"&gt;&lt;/el-table-column&gt; &lt;el-table-column label=\"操作\" width=\"180\"&gt; &lt;template slot-scope=\"scope\"&gt; &lt;el-button type=\"danger\" plain icon=\"el-icon-delete\" size=\"mini\" @click=\"dialogVisibleTrue( scope.row )\"&gt;删除&lt;/el-button&gt; &lt;/template&gt; &lt;/el-table-column&gt; &lt;/el-table&gt; &lt;Info v-if=\"totalNum\"&gt;&lt;/Info&gt; &lt;el-dialog title=\"注意\" :visible.sync=\"dialogVisible\" width=\"20%\"&gt; &lt;span&gt;确定要删除这个商品吗?&lt;/span&gt; &lt;span slot=\"footer\" class=\"dialog-footer\"&gt; &lt;el-button @click=\"dialogVisible = false\"&gt;取 消&lt;/el-button&gt; &lt;el-button type=\"primary\" @click=\"dialogSure\"&gt;确 定&lt;/el-button&gt; &lt;/span&gt; &lt;/el-dialog&gt; &lt;/div&gt; &lt;/template&gt;&lt;script&gt; import &#123; mapState, mapGetters, mapActions &#125; from 'vuex' import Info from './info' export default &#123; name: 'cart', data() &#123; return &#123; dialogVisible : false, result : null, input_number_value:1 &#125; &#125;, computed:&#123; ...mapGetters([ 'cartProducts','totalNum' ]) &#125;, components: &#123; Info &#125;, methods: &#123; ...mapActions(['delProduct','numChange']), dialogVisibleTrue( data )&#123; this.dialogVisible = true; this.result = data; &#125;, dialogSure()&#123; this.delProduct( this.result ); this.dialogVisible = false; &#125;, handleBlur(value)&#123; this.input_number_value = value &#125;, handleChange( data ) &#123; data.value = this.input_number_value; this.numChange( data ); &#125; &#125; &#125;&lt;/script&gt;&lt;style scoped&gt; .el-table th&gt;.cell&#123;text-align: center;&#125; .el-table td&gt;.cell&#123;text-align: center;&#125;&lt;/style&gt; &lt;el-input-number&gt;是控制单个商品数量加减的组件， :value=”scope.row.num” 属性绑定value值，v-on:input=”handleBlur” 属性通过handleBlur方法将数量单独存储在 data 的 input_number_value 值中，@change=”handleChange( scope.row )” 将change事件绑定handleChange方法，而 handleChange 方法里调用 action.js 中注册的 numChange 事件，给 numChange 传的参数中，data.value 是 data 中临时存放的 input_number_value 的值。 删除按钮是删除对应的一条数据，实现上，类似加入购物车的功能，这里加了一个弹出层&lt;el-dialog&gt;，询问是否要删除 这个页面引入一个组件 info.vue 用来显示购物车商品总数量、总价和清空购物车按钮info.vue 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;template&gt; &lt;div&gt; &lt;el-row :gutter=\"20\"&gt; &lt;el-col :span=\"6\"&gt;总数：&#123;&#123;totalNum&#125;&#125;&lt;/el-col&gt; &lt;el-col :span=\"6\"&gt;合计价格：&#123;&#123;totalPrice&#125;&#125;&lt;/el-col&gt; &lt;el-col :span=\"6\"&gt; &lt;el-button type=\"danger\" size=\"medium\" icon=\"el-icon-delete\" @click=\"dialogDeleteAll\"&gt;清空购物车&lt;/el-button&gt; &lt;/el-col&gt; &lt;el-col :span=\"6\"&gt;&lt;/el-col&gt; &lt;/el-row&gt; &lt;el-dialog title=\"注意\" :visible.sync=\"dialogVisible\" width=\"20%\"&gt; &lt;span&gt;要清空购物车吗?&lt;/span&gt; &lt;span slot=\"footer\" class=\"dialog-footer\"&gt; &lt;el-button @click=\"dialogVisible = false\"&gt;取 消&lt;/el-button&gt; &lt;el-button type=\"primary\" @click=\"dialogSure\"&gt;确 定&lt;/el-button&gt; &lt;/span&gt; &lt;/el-dialog&gt; &lt;/div&gt; &lt;/template&gt;&lt;script&gt; import &#123; mapState, mapGetters, mapActions &#125; from 'vuex' export default &#123; name: 'info', data() &#123; return &#123; dialogVisible : false &#125; &#125;, computed:&#123; ...mapGetters(['totalPrice','totalNum']) &#125;, methods: &#123; ...mapActions(['clearAllCart']), dialogDeleteAll( data )&#123; this.dialogVisible = true; &#125;, dialogSure()&#123; this.clearAllCart(); this.dialogVisible = false; &#125; &#125; &#125;&lt;/script&gt;&lt;style scoped&gt; .el-col-6&#123;padding: 20px; text-align: center;&#125;&lt;/style&gt; 清空购物车按钮就是清空 vuex 中 added 数组 项目地址: https://github.com/sonicwater/vue-element-ul-cart","categories":[{"name":"vue","slug":"vue","permalink":"https://github.com/sonicwater/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://github.com/sonicwater/tags/vue/"},{"name":"vuex","slug":"vuex","permalink":"https://github.com/sonicwater/tags/vuex/"},{"name":"element-ui","slug":"element-ui","permalink":"https://github.com/sonicwater/tags/element-ui/"},{"name":"购物车","slug":"购物车","permalink":"https://github.com/sonicwater/tags/购物车/"}]}]}